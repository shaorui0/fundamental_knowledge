# 隔离级别


1. 这个也可以想清楚，主要是什么？把每个场景的一些例子搞清楚，每个场景记一下例子，才能更好的去理解
TODO 
ddia

这个梳理一下，写个文章，完全没有问题了，每次都可以回顾
TODO 

这个在实验室已经写了？

幻读是指其他事务做出的一些“写”操作，导致了我的事务的返回结果。

快照隔离避免了只读查询中幻读，但是在像我们讨论的例子那样的读写事务中，幻影会导致特别棘手的写歪斜情况。


导致写入偏差的幻读
所有这些例子都遵循类似的**模式**：

一个SELECT查询找出符合条件的行，并检查是否符合一些要求。（例如：至少有两名医生在值班；不存在对该会议室同一时段的预定；棋盘上的位置没有被其他棋子占据；用户名还没有被抢注；账户里还有足够余额）

按照第一个查询的结果，应用代码决定是否继续。（可能会继续操作，也可能中止并报错）

如果应用决定继续操作，就执行写入（插入、更新或删除），并提交事务。

这个写入的效果改变了步骤2 中的先决条件。换句话说，如果在提交写入后，重复执行一次步骤1 的SELECT查询，将会得到不同的结果。因为写入改变符合搜索条件的行集（现在少了一个医生值班，那时候的会议室现在已经被预订了，棋盘上的这个位置已经被占据了，用户名已经被抢注，账户余额不够了）。
