# 虚拟内存

分为三个维度

1. 虚拟内存最核心的功能是作为缓存
    - 虚拟内存分为三部分，未分配的（可理解成交换区大小是动态变化的）、已分配但未缓存（与memory之间没有映射关系）、已缓存的
    - 磁盘 与 物理内存之间的缓存（DRAM）。同时CPU与物理内存之间也有L1, L2 cache（SRAM）
    - 缓存加快了速度？其实还不是，虚拟内存本质是在磁盘上的一个“交换区”，用于内存之间的页面交换。所以一本质上，是扩大了内存的逻辑容量，看上去更大了，而不是更快了。
    - 有很多要考虑的问题（请求式的页面换入换出）
        - 当前需要的虚拟页是否已缓存
        - 如果缓存，对应的物理页在哪里？
        - 如果未缓存，还要去磁盘找，在磁盘的哪里？
        - 还需要一个替换算法，选中一个牺牲页，与磁盘上的DRAM进行替换
2. 虚拟内存帮助内存管理
    - 每个进程有一个独立的页表（地址空间）。页面调度与独立地址空间相结合，对内存管理造成了深远的影响。
        - 简化了编译、汇编、链接、加载的过程，都会有磁盘和内存之间的交互（.c/.o/etc）
        - 简化了内存分配的过程，需要哪些？用户层是malloc分配heap，stack自动增长等。典型的就是虚拟地址连续，但是物理地址不用连续。
3. 虚拟内存作为内存保护
    - 每个虚拟页的地址头，都有SUP段，用于判断是否允许用户态访问。

# 说一下内存管理

从哪些维度来说？

0. 内存的最主要的功能是什么
    - 充当磁盘和CPU之间的cache
1. 内存分配与回收
    - 分页式
    - 分段式
    - 段页式
    - 涉及到的页面置换算法
2. 内存保护
    - 分页系统的地址映射机制




