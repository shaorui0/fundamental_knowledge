# python都有哪些容器，底层都是怎么实现的？

万物不离其中，肯定都是最基础的那些数据结构

list：可变的，pushright, popright，这两个复杂度还好，肯定是链表，不消说的
典型的tuple呢？因为不改大小，我觉得是数组
然后map，我倾向于说是一个红黑树
然后还有什么？set

这种k-v形式的，应该是怎么起作用的？
红黑树管理key,value_ref相当于一个地址引用？还是直接保存数据？
因为一删，就是都删

典型的，redis的管理是通过hash + 双向链表

双向链表管理value？
双向链表管理k-v
hash管理key，能够比较快的去拿到key

---

# 面试题：如何设计一个内存池？

对于一个没有听说过的东西，你能不能在短时间内“问清楚”一些基本概念？
1. 什么是内存池？（what）
2. 为什么需要内存池？（why）
3. 什么情况我需要内存池？（when）
4. 如何使用内存池？（how）

关于池的概念：（线程池、内存池......）
他是希望，在一个地方，创建好多个需要的对象，以后直接拿来使用就可以了。然后对象的回收，在一个地方完成即可。
就现代OS而言，是否真的需要内存池去优化频繁的内存分配回收？
但就这里考察的点，是说，我提出一个功能，你能不能将你自己的知识串联起来，然后提出某些有价值的问题，最后通过这些问题来达到你的目的。
比如这里：
1. 我首先是有两个接口，从池里拿到内存，以及将内存放回池里。
    拿到内存包括，当前的池里是否能满足需求？
    - 能满足，内存给它，更新一些信息。同时由于可能产生碎片（非连续块，还需要某种策略去将碎片整理好）
        - 能满足，但是需要先处理碎片
        - 能满足，并且直接能够获取到
    - 不能满足，再申请内存分配，分配一定大小的内存（可能是固定的，可能是动态的）
        分配新的内存块以后，需要更新一些信息

    内存放回包括，释放掉原来的内存？还是初始化
    - 如果是直接初始化原来的数据块（二进制0），可能就不能整理碎片，而是通过链表进行管理“可用”和“不可用”

2. 需要什么信息来管理？
    - 我可能需要一个struct来集中管理
    - 一个已经分配的链表？如果要放回，会告诉start + len，通过这个信息更新“可用”功能即可
    - 最好是整数形式的（固定大小的块）。比如4KB，申请3KB，也给4KB，这样会有一个碎片，但是管理起来更加方便

3. 都有什么样的场景？会不会有并发的场景？需要使用同步语义吗？
    这里就需要对这个问题和面试官进行沟通
---
