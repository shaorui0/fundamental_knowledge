# 海量数据问题

#### 问题描述：
这是一个 ip 地址 127.0.0.1
假设有**100亿**个这样的 ip 地址存在文件中
这个文件大小大约是 **100GB**
问题：要统计出100亿个 ip 中，**重复出现次数最多的前10个**
限制：1台机器，**内存1G**, 磁盘可以随便用


#### 解决

分桶：
- 大体思路没错，用堆进行对每个桶取top-k，但是产生问题是，可能一个频率很高的ip被分到多个桶中，**频率被稀释**了。
- 所以现在的问题就变成了，需要保证特定的ip只进入到一个桶里面
- 当时回答了『外部排序』（比如B-tree），其实本质上是没必要严格排序的，只需要保证比较弱的『单一桶』条件即可。
- 下来以后发现，是可以进行**hash**来分的，ip%100 => 分到100桶里面，这样不就保证了吗？
